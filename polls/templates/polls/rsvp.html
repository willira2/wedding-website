
{% extends "polls/base.html" %}

{% block title %}Title yo{% endblock %}

{% block content %}
    <nav class="navbar navbar-default fixed-top bg-dark" id="mainNav">
      <div class="container-fluid">
      	<a class="navbar-brand js-scroll-trigger" href="/polls/">go back</a>
      </div>
    </nav>

    <header class="text-center d-flex" id="rsvp-header">
      <div class="container my-auto" >
        <div class="row">
          <div class="col-lg-10 mx-auto">
            <h1 class="text-primary mb-0">Please RSVP by March 15</h1>
          </div>
        </div>
      </div>
    </header>

    <section class="p-5">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 mx-auto text-center mb-5">
            <h2 class="section-heading">You in or out?</h2>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-8 mx-auto">
          	<input class="select2 form-control" id="field_id" type="text">

          	<table>
          		<thead>
          			<th>Which guests will be attending?</th>
          		</thead>
          		<tbody>
          			{% for g in guest %}
          			<tr>
          				<td> {{ g.first_name }} {{ g.last_name }} </td>
          			</tr>
          			{% endfor %}
          		</tbody>
          	</table>
          </div>
        </div>
      </div>
    </section>


{% endblock %}


{% block javascript %}
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
		console.log('hello');

        $("#field_id").select2({
		    tags: true,
		    multiple: true,
		    // tokenSeparators: [',', ' '],
		    minimumInputLength: 2,
		    minimumResultsForSearch: 10,
		    ajax: {
		        url: '/ajax/get_invitees',
		        dataType: "json",
		        type: "GET",
		        data: function (params) {

		            var queryParameters = {
		                q: params.term
		            }
		            return queryParameters;
		        },
		        processResults: function (data) {
		            return {
		                results: $.map(data, function (item) {
		                    return {
		                        text: item.first_name,
		                        id: item.pk
		                    }
		                })
		            };
		        }
		    }
		});
	});
</script>


{% endblock %}